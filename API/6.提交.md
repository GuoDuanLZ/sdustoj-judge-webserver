提交相关API
==

## 提交相关概念

```
提交 = { 总体结果, 评测信息, 评测细节, 评测代码信息 }
总体结果 = “Accepted”(AC) | “Wrong Answer”(WA) | ...
评测信息 ∈ { 对总体结果的解释性信息 }
评测细节 = { d | type(d) = 单条数据评测信息 }
单条数据评测信息 = { ptr(测试数据), 测试数据评测结果 }
评测代码信息 = { t | type(t) = 提交代码 }
提交代码 = { 名称, 代码 }
```

## 提交相关API

### 权限

题库管理员、题目管理员有权使用全部API。

### API

* 提交记录

    * 列表

    URL：

    ```
    GET /api-server/submissions/
    ```

    属性：
    
    ```
    {
        id: 提交id,
        submit_time: 代码提交时间,
        judge_time: 最后一次信息发生变化的时间,
        problem: 题目id,
        problem_title: 题目标题,
        language: 语言,
        code_length: 代码长度,
        user: 用户,
        client: 提交,
        contest: 竞赛,
        finished: 评测是否已经完成,
        status: 状态（总体结果）
    }
    ```

    * 详情

    URL：

    ```
    GET /api-server/submissions/{ submission id }/
    ```

    属性：
    
    ```
    {
        id: 提交id,
        submit_time: 代码提交时间,
        judge_time: 最后一次信息发生变化的时间,
        problem: 题目id,
        problem_title: 题目标题,
        language: 语言,
        code_length: 代码长度,
        user: 用户,
        client: 提交,
        contest: 竞赛,
        finished: 评测是否已经完成,
        status: 状态（总体结果）
    }
    ```

* 评测信息

    当评测结果为编译错误等在运行之前出的错误时，评测信息中为相应错误的具体信息。

    URL：

    ```
    GET /api-server/submission-messages/{ submission id }/
    ```

    属性：

    ```
    {
        submission: 提交id,
        content: 信息正文
    }
    ```

* 评测细节


    URL：

    ```
    GET /api-server/submission-details/{ submission id }/
    ```

    属性：

    ```
    {
        submission: 提交id,
        info: 各组数据的评测结果，字典
    }
    ```

* 代码信息

    * 一条提交的所有代码

        URL：

        ```
        GET /api-server/submission-code-info/{ submission id }/
        ```

        属性：

        ```
        {
            submission: 提交id,
            info: 数组，元素为文件名
        }
        ```
        **普通提交（单文件提交），文件名恒为code**

    * 一条提交的所有代码中的一份代码

        URL:

        ```
        GET /api-server/submission-code-info/{ submission id }/codes/{ code filename }/
        ```

        属性：

        ```
        {
            submission: 提交id,
            name: 文件名,
            code: 代码
        }
        ```

* 提交程序

    URL：

    ```
    POST /api-server/submissions/
    ```

    属性：

    ```
    {
        problem: 题目id,
        environment: 环境id,
        code: 代码
    }
    ```
